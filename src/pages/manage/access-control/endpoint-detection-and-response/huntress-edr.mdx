# Restrict Network Access with Huntress EDR

[Huntress](https://www.huntress.com/) is a managed detection and response (MDR) platform designed for IT service providers and enterprises to protect endpoints from cyber threats. The Huntress agent continuously monitors endpoints, collecting security telemetry including Windows Defender status, firewall configuration, and policy compliance, which can be used to enforce network access controls based on device security posture.

The integration of NetBird with Huntress provides network security by ensuring only devices that meet your defined security standards can access the protected network. This approach allows administrators to enforce access restrictions based on critical Windows security settings such as Defender health status, antivirus definitions, firewall state, and policy compliance, ensuring only properly secured endpoints have access to network resources via NetBird.

In this guide, you'll learn how to integrate NetBird with Huntress and configure access controls to allow only compliant devices onto your network.

<Note>
    TLDR: Devices that fail to meet Huntress security requirements (Defender Policy Status, Managed Microsoft Defender, or Firewall) will automatically lose network access. Once a device meets all compliance criteria, access is restored.
</Note>


## Prerequisites

Before you start creating and configuring a Huntress integration, ensure that you have the following:
- A Huntress account with the permissions to create and manage API keys.
  If you don't have the required permissions, ask your Huntress administrator to grant them to you.

## Create a Huntress API Key

- Navigate to your Huntress Management Console
- Go to **Settings** &raquo; **API Credentials**
- Click **Create API Credential**
- Fill in the form:
  - **Name**: `NetBird Integration`
  - **Description**: `API key for NetBird EDR integration` (optional)
- Click **Create**
- Copy the generated API key and secret immediately (they will only be displayed once)
- Note your Huntress organization key from the console

<Note>
Treat the API credentials securely and store them safely. You will need both the API key and secret for the NetBird integration configuration.
</Note>

## Configure a Huntress Integration in NetBird

- Navigate to the [Integrations &raquo; EDR](https://app.netbird.io/integrations?tab=edr) tab in the NetBird dashboard
- Click **Connect Huntress** to start the configuration wizard
<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/getting-started.png" alt="Huntress integration getting started" className="imagewrapper-big"/>
</p>
- Click the **Get Started** button to initiate the integration process
- Enter the API key and secret you created in the previous step and click **Continue** to verify the connection

<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/api-config.png" alt="Huntress API configuration" className="imagewrapper-big"/>
</p>

- Select the **groups** you want to apply the integration to and click **Connect**

<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/group-config.png" alt="Huntress group configuration" className="imagewrapper-big"/>
</p>


<Note>
    The EDR check will apply only to peers in the selected groups and will require a running Huntress agent.
    You can also use groups [synchronized from your Identity Provider (IdP)](/how-to/idp-sync).
</Note>

- Configure the compliance criteria that devices must meet to access your network. These security requirements ensure only healthy, properly configured devices can connect. Select the criteria that align with your organization's security policies:
  - **Defender Policy Status**: Requires Windows Defender configuration to match your organization's security policy requirements.
  - **Managed Microsoft Defender**: Requires Defender to be enabled, up-to-date, scanned recently, and no conflicting antivirus detected.
  - **Firewall**: Requires an active firewall with all required profiles enabled.

<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/compliance-config.png" alt="edr-integrations" className="imagewrapper-big"/>
</p>


- Configure the **Huntress Sync Window** (default is 24 hours). This setting determines which devices NetBird will consider for network access based on their recent activity in Huntress. Only devices that have been active and reporting to Huntress within this time window will be synchronized. These devices must then also meet the configured compliance criteria to gain network access.

<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/sync-config.png" alt="edr-integrations" className="imagewrapper-big"/>
</p>

- Click **Connect** to complete the integration setup

- Only peers that have the Huntress agent installed and meet all the configured compliance criteria will be granted access to the network.
  Peers without the Huntress agent or those that don't meet the compliance requirements will appear with an `Approval required` mark in the peers list and won't be able to access
  the network until they have the agent installed and satisfy all the specified security requirements.

<p>
    <img src="/docs-static/img/manage/access-control/endpoint-detection-and-response/huntress-edr/edr-approval-required.png" alt="edr-approval-required" className="imagewrapper-big"/>
</p>


<Note>
    NetBird matches the Huntress agent to the peer using the Serial Number of the device. You must ensure that each of your devices has a unique serial number.
</Note>