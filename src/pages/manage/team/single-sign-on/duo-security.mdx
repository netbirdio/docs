import {Note} from "@/components/mdx";

# Duo Security on NetBird Cloud

You can use Duo Security as your Identity Provider with NetBird, but it will require some additional configuration steps. Duo Security is a cloud-based security platform that provides secure access through single sign-on (SSO), multi-factor authentication (MFA), and device trust. Duo offers comprehensive identity verification and access policies to protect applications and data.

<Note>
    Support for OIDC-compliant IdPs is available on the Team plan and higher.
    The Free plan supports Google, Microsoft, and social logins.
</Note>

## Prerequisites

Before you start using Duo Single Sign-On, make sure to meet all the requirements described below:

- A Duo Admin with the Owner, Administrator, or Application Manager role

## Step 1: Create a new OIDC Application

Log in to the [Duo Admin Panel](https://admin.duosecurity.com/). Navigate to **Applications** in the left sidebar, then click **Applications**. Click **+ Add Application** which will open the Application Catalog. Search for **Generic OIDC**, then click **+ Add** next to it.

<p>
    <img src="/docs-static/img/manage/team/single-sign-on/duo-idp/duo-select-application.png" alt="duo-select-application" className="imagewrapper-big"/>
</p>

## Step 2: Configure Basic Settings

Configure the Basic Configuration section with the following settings:
- **Application name**: NetBird
- **Application Type**: Generic OIDC Relying Party - Single Sign-On
- **User access**: `Enable for all users` (if applicable to all users) or `Enable only for permitted groups` (for fine-grained access control)

<p>
    <img src="/docs-static/img/manage/team/single-sign-on/duo-idp/duo-basic-configuration.png" alt="duo-basic-configuration" className="imagewrapper-big"/>
</p>

## Step 3: Configure Relying Party Settings

Configure the Relying Party section with the following settings:
- **Grant Type**: Authorization Code, Refresh Tokens
- **Sign-In Redirect URLs**: `https://login.netbird.io/login/callback`

<p>
    <img src="/docs-static/img/manage/team/single-sign-on/duo-idp/duo-relying-party.png" alt="duo-relying-party" className="imagewrapper-big"/>
</p>

## Step 4: Configure OIDC Response

Configure the OIDC Response section with the following scopes:
- **Scopes**: openid, profile, email

<p>
    <img src="/docs-static/img/manage/team/single-sign-on/duo-idp/duo-oidc-response.png" alt="duo-oidc-response" className="imagewrapper-big"/>
</p>

Click **Save** to complete the application configuration.

## Step 5: Share Information with NetBird Support

From the application metadata, copy the **Client ID**, **Client Secret**, and **Discovery URL**. Share the following information with the NetBird support team at support@netbird.io:

- **Client ID**
- **Client Secret**
- **Discovery URL**
- **Email domains for your users**

<Note>
We recommend using a secure channel to share the Client Secret. You can send a separate email and use a secret sharing service like: <br/>
- https://onetimesecret.com/en/ <br/>
- https://password.link/en <br/>
</Note>