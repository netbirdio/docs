# Routing traffic to multiple IP resources

This guide shows how to route traffic to multiple IP resources using NetBird [Networks](/manage/networks) with [IP resources](/manage/networks#resources). This is a common scenario for DevOps and Platform teams who need to provide differentiated access to on-premises or cloud infrastructure.

## Example scenario

In this example, you will configure access to an internal network (`172.16.0.0/15`) with these requirements:
- All users need access to DNS servers at `172.16.30.2` and `172.17.100.2` (UDP port 53 only)
- The DevOps team needs full access to the entire network range

Traffic will be routed through [routing peers](/manage/networks#routing-peers) running inside the network.

### Create a network

Navigate to `Networks` > `Networks` in the NetBird dashboard:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/view-wild-network-1.png" alt="new-net-1" className="imagewrapper-big"/>
</p>

Click `Add Network` to open the setup wizard. Enter a name and description for the network, then click `Continue`:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/new-example-network-2.png" alt="new-net2" className="imagewrapper"/>
</p>

### Add a routing peer

Click `Add routing peer` and select a peer from your network:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-routing-peer-1.png" alt="new-example-routing-peer-1" className="imagewrapper"/>
</p>

Click `Continue`, then accept the defaults and click `Add Routing Peer`:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-routing-peer-2.png" alt="new-routing-peer-2" className="imagewrapper"/>
</p>

### Add the network resource

Click `Add Resource` and enter `Office network` as the name with IP range `172.16.0.0/15` as the address:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-1.png" alt="new-example-resource-1" className="imagewrapper"/>
</p>

Assign the group `office-network` to this resource. This group will be used in the access policy for the DevOps team.

### Create an access policy for the network resource

Create a policy that grants the `DevOps` group full access to the `office-network` resource group.

Click `Create Policy` and configure the fields as shown:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-acl-1.png" alt="new-resource-acl-1" className="imagewrapper-big"/>
</p>

Click `Continue` twice, then click `Add Policy`:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-acl-2.png" alt="new-resource-acl-2" className="imagewrapper-big"/>
</p>

### Add the DNS server resources

Add the first DNS server as a resource. Click `Add Resource` and enter the IP address:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-2.png" alt="new-example-resource-2" className="imagewrapper"/>
</p>

Assign the group `office-dns-servers` to this resource. When prompted to create a policy, click `Later` since you will add another DNS server first.

Add the second DNS server resource:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-3.png" alt="new-example-resource-3" className="imagewrapper"/>
</p>

### Create an access policy for DNS servers

Create a policy that grants the `All users` group access to the `office-dns-servers` resource group on UDP port 53 only.

Click `Create Policy` and configure the fields:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-acl-3.png" alt="new-resource-acl-3" className="imagewrapper-big"/>
</p>

Click `Continue` twice, then click `Add Policy`. Use a generic policy name to cover both DNS server addresses:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/add-example-resource-acl-4.png" alt="new-resource-acl-4" className="imagewrapper-big"/>
</p>

### View the network

After completing the wizard, the network appears in the Networks list:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/view-example-network-1.png" alt="view-example-network-1" className="imagewrapper-big"/>
</p>

Click the network name to view details:

<p>
    <img src="/docs-static/img/manage/networks/by-resource-type/routing-traffic-to-multiple-resources/view-example-network-2.png" alt="view-example-network-2" className="imagewrapper-big"/>
</p>

From this view, you can edit or add resources and routing peers using the `Edit` buttons in each section.

You have now created a network with multiple resources that provide different access levels to different user groups within your organization.

## Get started
<p float="center" >
    <Button name="button" className="button-5" onClick={() => window.open("https://netbird.io/pricing")}>Use NetBird</Button>
</p>

- Make sure to [star us on GitHub](https://github.com/netbirdio/netbird)
- Follow us [on X](https://x.com/netbird)
- Join our [Slack Channel](/slack-url)
- NetBird [latest release](https://github.com/netbirdio/netbird/releases) on GitHub
