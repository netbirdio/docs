export const title = 'Ingress Ports'


## List all Port Allocations  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'GET', label: '/api/peers/{peerId}/ingress/ports' }}


<Row>
 <Col>
Returns a list of all ingress port allocations for a peer

### Path Parameters


<Properties>
<Property name="peerId" type="string" required={true} >
The unique identifier of a peer
</Property>

</Properties>


### Query Parameters


<Properties>
<Property name="name" type="string" >
Filters ingress port allocations by name
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="GET" label="/api/peers/{peerId}/ingress/ports" >
```bash {{ title: 'cURL' }}
curl -X GET https://api.netbird.io/api/peers/{peerId}/ingress/ports \
-H 'Accept: application/json' \
-H 'Authorization: Token <TOKEN>' 
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
[
  {
    "id": "ch8i4ug6lnn4g9hqv7m0",
    "name": "Ingress Peer Allocation 1",
    "ingress_peer_id": "x7p3kqf2rdd8j5zxw4n9",
    "region": "germany",
    "enabled": true,
    "ingress_ip": "192.34.0.123",
    "port_range_mappings": [
      {
        "translated_start": 80,
        "translated_end": 320,
        "ingress_start": 1080,
        "ingress_end": 1320,
        "protocol": "tcp"
      }
    ]
  }
]
```

```json {{ title: 'Schema' }}
[
  {
    "id": "string",
    "name": "string",
    "ingress_peer_id": "string",
    "region": "string",
    "enabled": "boolean",
    "ingress_ip": "string",
    "port_range_mappings": [
      {
        "translated_start": "integer",
        "translated_end": "integer",
        "ingress_start": "integer",
        "ingress_end": "integer",
        "protocol": "string"
      }
    ]
  }
]
```
</CodeGroup>

</Col>

</Row>

---



## Create a Port Allocation  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'POST', label: '/api/peers/{peerId}/ingress/ports' }}


<Row>
 <Col>
Creates a new ingress port allocation for a peer

### Path Parameters


<Properties>
<Property name="peerId" type="string" required={true} >
The unique identifier of a peer
</Property>

</Properties>


### Request-Body Parameters


<Properties>
<Property name="name" type="string" required={true} >
Name of the ingress port allocation
</Property>
<Property name="enabled" type="boolean" required={true} >
Indicates if an ingress port allocation is enabled
</Property>
<Property name="port_ranges" type="object[]" >
 <details class="custom-details" open>

<summary>List of port ranges that are forwarded by the ingress peer</summary>
<Properties>
<Property name="start" type="integer" required={true} >
The starting port of the range of forwarded ports
</Property>
<Property name="end" type="integer" required={true} >
The ending port of the range of forwarded ports
</Property>
<Property name="protocol" type="string" required={true} >
The protocol accepted by the port range
</Property>

</Properties>

</details>

</Property>
<Property name="direct_port" type="object" >
 <details class="custom-details" open>

<summary>More Information</summary>
<Properties>
<Property name="count" type="integer" required={true} >
The number of ports to be forwarded
</Property>
<Property name="protocol" type="string" required={true} >
The protocol accepted by the port
</Property>

</Properties>

</details>

</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="POST" label="/api/peers/{peerId}/ingress/ports" >
```bash {{ title: 'cURL' }}
curl -X POST https://api.netbird.io/api/peers/{peerId}/ingress/ports \
-H 'Authorization: Token <TOKEN>' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
--data-raw '{
  "name": "Ingress Port Allocation 1",
  "enabled": true,
  "port_ranges": [
    {
      "start": 80,
      "end": 320,
      "protocol": "tcp"
    }
  ],
  "direct_port": {
    "count": 5,
    "protocol": "udp"
  }
}'
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "name": "Ingress Peer Allocation 1",
  "ingress_peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "region": "germany",
  "enabled": true,
  "ingress_ip": "192.34.0.123",
  "port_range_mappings": [
    {
      "translated_start": 80,
      "translated_end": 320,
      "ingress_start": 1080,
      "ingress_end": 1320,
      "protocol": "tcp"
    }
  ]
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "name": "string",
  "ingress_peer_id": "string",
  "region": "string",
  "enabled": "boolean",
  "ingress_ip": "string",
  "port_range_mappings": [
    {
      "translated_start": "integer",
      "translated_end": "integer",
      "ingress_start": "integer",
      "ingress_end": "integer",
      "protocol": "string"
    }
  ]
}
```
</CodeGroup>

</Col>

</Row>

---



## Retrieve a Port Allocation  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'GET', label: '/api/peers/{peerId}/ingress/ports/{allocationId}' }}


<Row>
 <Col>
Get information about an ingress port allocation

### Path Parameters


<Properties>
<Property name="peerId" type="string" required={true} >
The unique identifier of a peer
</Property>
<Property name="allocationId" type="string" required={true} >
The unique identifier of an ingress port allocation
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="GET" label="/api/peers/{peerId}/ingress/ports/{allocationId}" >
```bash {{ title: 'cURL' }}
curl -X GET https://api.netbird.io/api/peers/{peerId}/ingress/ports/{allocationId} \
-H 'Accept: application/json' \
-H 'Authorization: Token <TOKEN>' 
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "name": "Ingress Peer Allocation 1",
  "ingress_peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "region": "germany",
  "enabled": true,
  "ingress_ip": "192.34.0.123",
  "port_range_mappings": [
    {
      "translated_start": 80,
      "translated_end": 320,
      "ingress_start": 1080,
      "ingress_end": 1320,
      "protocol": "tcp"
    }
  ]
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "name": "string",
  "ingress_peer_id": "string",
  "region": "string",
  "enabled": "boolean",
  "ingress_ip": "string",
  "port_range_mappings": [
    {
      "translated_start": "integer",
      "translated_end": "integer",
      "ingress_start": "integer",
      "ingress_end": "integer",
      "protocol": "string"
    }
  ]
}
```
</CodeGroup>

</Col>

</Row>

---



## Update a Port Allocation  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'PUT', label: '/api/peers/{peerId}/ingress/ports/{allocationId}' }}


<Row>
 <Col>
Update information about an ingress port allocation

### Path Parameters


<Properties>
<Property name="peerId" type="string" required={true} >
The unique identifier of a peer
</Property>
<Property name="allocationId" type="string" required={true} >
The unique identifier of an ingress port allocation
</Property>

</Properties>


### Request-Body Parameters


<Properties>
<Property name="name" type="string" required={true} >
Name of the ingress port allocation
</Property>
<Property name="enabled" type="boolean" required={true} >
Indicates if an ingress port allocation is enabled
</Property>
<Property name="port_ranges" type="object[]" >
 <details class="custom-details" open>

<summary>List of port ranges that are forwarded by the ingress peer</summary>
<Properties>
<Property name="start" type="integer" required={true} >
The starting port of the range of forwarded ports
</Property>
<Property name="end" type="integer" required={true} >
The ending port of the range of forwarded ports
</Property>
<Property name="protocol" type="string" required={true} >
The protocol accepted by the port range
</Property>

</Properties>

</details>

</Property>
<Property name="direct_port" type="object" >
 <details class="custom-details" open>

<summary>More Information</summary>
<Properties>
<Property name="count" type="integer" required={true} >
The number of ports to be forwarded
</Property>
<Property name="protocol" type="string" required={true} >
The protocol accepted by the port
</Property>

</Properties>

</details>

</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="PUT" label="/api/peers/{peerId}/ingress/ports/{allocationId}" >
```bash {{ title: 'cURL' }}
curl -X PUT https://api.netbird.io/api/peers/{peerId}/ingress/ports/{allocationId} \
-H 'Authorization: Token <TOKEN>' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
--data-raw '{
  "name": "Ingress Port Allocation 1",
  "enabled": true,
  "port_ranges": [
    {
      "start": 80,
      "end": 320,
      "protocol": "tcp"
    }
  ],
  "direct_port": {
    "count": 5,
    "protocol": "udp"
  }
}'
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "name": "Ingress Peer Allocation 1",
  "ingress_peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "region": "germany",
  "enabled": true,
  "ingress_ip": "192.34.0.123",
  "port_range_mappings": [
    {
      "translated_start": 80,
      "translated_end": 320,
      "ingress_start": 1080,
      "ingress_end": 1320,
      "protocol": "tcp"
    }
  ]
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "name": "string",
  "ingress_peer_id": "string",
  "region": "string",
  "enabled": "boolean",
  "ingress_ip": "string",
  "port_range_mappings": [
    {
      "translated_start": "integer",
      "translated_end": "integer",
      "ingress_start": "integer",
      "ingress_end": "integer",
      "protocol": "string"
    }
  ]
}
```
</CodeGroup>

</Col>

</Row>

---



## Delete a Port Allocation  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'DELETE', label: '/api/peers/{peerId}/ingress/ports/{allocationId}' }}


<Row>
 <Col>
Delete an ingress port allocation

### Path Parameters


<Properties>
<Property name="peerId" type="string" required={true} >
The unique identifier of a peer
</Property>
<Property name="allocationId" type="string" required={true} >
The unique identifier of an ingress port allocation
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="DELETE" label="/api/peers/{peerId}/ingress/ports/{allocationId}" >
```bash {{ title: 'cURL' }}
curl -X DELETE https://api.netbird.io/api/peers/{peerId}/ingress/ports/{allocationId} \
-H 'Authorization: Token <TOKEN>' \
```
</CodeGroup>

</Col>

</Row>

---



## List all Ingress Peers  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'GET', label: '/api/ingress/peers' }}


<Row>
 <Col>
Returns a list of all ingress peers
</Col>
 <Col sticky>
<CodeGroup title="Request" tag="GET" label="/api/ingress/peers" >
```bash {{ title: 'cURL' }}
curl -X GET https://api.netbird.io/api/ingress/peers \
-H 'Accept: application/json' \
-H 'Authorization: Token <TOKEN>' 
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
[
  {
    "id": "ch8i4ug6lnn4g9hqv7m0",
    "peer_id": "x7p3kqf2rdd8j5zxw4n9",
    "ingress_ip": "192.34.0.123",
    "available_ports": {
      "tcp": 45765,
      "udp": 50000
    },
    "enabled": true,
    "connected": true,
    "fallback": true,
    "region": "germany"
  }
]
```

```json {{ title: 'Schema' }}
[
  {
    "id": "string",
    "peer_id": "string",
    "ingress_ip": "string",
    "available_ports": {
      "tcp": "integer",
      "udp": "integer"
    },
    "enabled": "boolean",
    "connected": "boolean",
    "fallback": "boolean",
    "region": "string"
  }
]
```
</CodeGroup>

</Col>

</Row>

---



## Create a Ingress Peer  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'POST', label: '/api/ingress/peers' }}


<Row>
 <Col>
Creates a new ingress peer

### Request-Body Parameters


<Properties>
<Property name="peer_id" type="string" required={true} >
ID of the peer that is used as an ingress peer
</Property>
<Property name="enabled" type="boolean" required={true} >
Defines if an ingress peer is enabled
</Property>
<Property name="fallback" type="boolean" required={true} >
Defines if an ingress peer can be used as a fallback if no ingress peer can be found in the region of the forwarded peer
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="POST" label="/api/ingress/peers" >
```bash {{ title: 'cURL' }}
curl -X POST https://api.netbird.io/api/ingress/peers \
-H 'Authorization: Token <TOKEN>' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
--data-raw '{
  "peer_id": "ch8i4ug6lnn4g9hqv7m0",
  "enabled": true,
  "fallback": true
}'
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "ingress_ip": "192.34.0.123",
  "available_ports": {
    "tcp": 45765,
    "udp": 50000
  },
  "enabled": true,
  "connected": true,
  "fallback": true,
  "region": "germany"
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "peer_id": "string",
  "ingress_ip": "string",
  "available_ports": {
    "tcp": "integer",
    "udp": "integer"
  },
  "enabled": "boolean",
  "connected": "boolean",
  "fallback": "boolean",
  "region": "string"
}
```
</CodeGroup>

</Col>

</Row>

---



## Retrieve a Ingress Peer  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'GET', label: '/api/ingress/peers/{ingressPeerId}' }}


<Row>
 <Col>
Get information about an ingress peer

### Path Parameters


<Properties>
<Property name="ingressPeerId" type="string" required={true} >
The unique identifier of an ingress peer
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="GET" label="/api/ingress/peers/{ingressPeerId}" >
```bash {{ title: 'cURL' }}
curl -X GET https://api.netbird.io/api/ingress/peers/{ingressPeerId} \
-H 'Accept: application/json' \
-H 'Authorization: Token <TOKEN>' 
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "ingress_ip": "192.34.0.123",
  "available_ports": {
    "tcp": 45765,
    "udp": 50000
  },
  "enabled": true,
  "connected": true,
  "fallback": true,
  "region": "germany"
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "peer_id": "string",
  "ingress_ip": "string",
  "available_ports": {
    "tcp": "integer",
    "udp": "integer"
  },
  "enabled": "boolean",
  "connected": "boolean",
  "fallback": "boolean",
  "region": "string"
}
```
</CodeGroup>

</Col>

</Row>

---



## Update a Ingress Peer  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'PUT', label: '/api/ingress/peers/{ingressPeerId}' }}


<Row>
 <Col>
Update information about an ingress peer

### Path Parameters


<Properties>
<Property name="ingressPeerId" type="string" required={true} >
The unique identifier of an ingress peer
</Property>

</Properties>


### Request-Body Parameters


<Properties>
<Property name="enabled" type="boolean" required={true} >
Defines if an ingress peer is enabled
</Property>
<Property name="fallback" type="boolean" required={true} >
Defines if an ingress peer can be used as a fallback if no ingress peer can be found in the region of the forwarded peer
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="PUT" label="/api/ingress/peers/{ingressPeerId}" >
```bash {{ title: 'cURL' }}
curl -X PUT https://api.netbird.io/api/ingress/peers/{ingressPeerId} \
-H 'Authorization: Token <TOKEN>' \
-H 'Accept: application/json' \
-H 'Content-Type: application/json' \
--data-raw '{
  "enabled": true,
  "fallback": true
}'
```
</CodeGroup>
<CodeGroup title="Response" >
```json {{ title: 'Example' }}
{
  "id": "ch8i4ug6lnn4g9hqv7m0",
  "peer_id": "x7p3kqf2rdd8j5zxw4n9",
  "ingress_ip": "192.34.0.123",
  "available_ports": {
    "tcp": 45765,
    "udp": 50000
  },
  "enabled": true,
  "connected": true,
  "fallback": true,
  "region": "germany"
}
```

```json {{ title: 'Schema' }}
{
  "id": "string",
  "peer_id": "string",
  "ingress_ip": "string",
  "available_ports": {
    "tcp": "integer",
    "udp": "integer"
  },
  "enabled": "boolean",
  "connected": "boolean",
  "fallback": "boolean",
  "region": "string"
}
```
</CodeGroup>

</Col>

</Row>

---



## Delete a Ingress Peer  <Badge  status="cloud-only" text="cloud-only" hoverText="This feature is only available in the cloud version of NetBird." /> {{ tag: 'DELETE', label: '/api/ingress/peers/{ingressPeerId}' }}


<Row>
 <Col>
Delete an ingress peer

### Path Parameters


<Properties>
<Property name="ingressPeerId" type="string" required={true} >
The unique identifier of an ingress peer
</Property>

</Properties>

</Col>
 <Col sticky>
<CodeGroup title="Request" tag="DELETE" label="/api/ingress/peers/{ingressPeerId}" >
```bash {{ title: 'cURL' }}
curl -X DELETE https://api.netbird.io/api/ingress/peers/{ingressPeerId} \
-H 'Authorization: Token <TOKEN>' \
```
</CodeGroup>

</Col>

</Row>

---
