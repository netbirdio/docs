# Introduction

NetBird’s Network Flow Logs feature provides a high-level view of traffic flows between network peers and resources.
It captures connection events on the client (peer) side – for example, when peer A connects to peer B –
allowing administrators to observe how devices communicate across the NetBird network​.
The primary purpose of flow logging is to help network admins monitor network activity,
detect unusual or unauthorized connections, and troubleshoot connectivity issues in their NetBird mesh VPN​.
Unlike packet capture, flow logs record metadata about the traffic (addresses, ports, timestamps, etc.) rather than the contents,
preserving privacy while still giving useful insight​.

By focusing on client-side events, NetBird’s flow logs show what each peer is doing on the network.
This includes which peers or services it is contacting, over which protocols, and when.
Network Flow Logs are especially useful for verifying that access control policies are working as expected (e.g. confirming that a peer could reach an allowed resource,
or that blocked traffic wasn’t forwarded).
In essence, they provide an audit trail of network connections in your NetBird environment,
helping administrators ensure the network is being used according to policy and to quickly identify
any anomalies or needed configuration changes.

# Data Collected on Client

When enabled, a NetBird peer will record metadata for each network flow that it participates in. The data collected typically includes:

* Timestamp/Duration: When the flow started and ended (or how long it lasted).
* Source and Destination IP Addresses: The IP of the peer (source) and the IP of the remote endpoint (destination). For peer-to-peer traffic, these will be the NetBird network IPs (e.g. 100.x.x.x addresses of each peer). For traffic to an external resource (like a private server or subnet), the destination might be an IP in that remote network​.
* Source and Destination Ports: The network ports used by the connection (for TCP/UDP flows). ICMP flows will be identified by ICMP type rather than ports​.
* Protocol: The protocol of the traffic, such as TCP, UDP, or ICMP​.
* Volume of Data – The amount of data transferred, often measured in number of packets and bytes sent/received for the duration of the flow​.(This is sometimes referred to as packet/byte counting.)
**[CHECK] Add all fields**

Crucially, only metadata is logged, not the actual payload of the packets.
NetBird does not record contents of communications – for example, it might log that a peer made an HTTPS connection
to an IP, but it will not log any usernames, passwords, or data exchanged inside that connection.
This means sensitive information within the traffic remains private​.
In addition, certain types of traffic are excluded from logging by default for privacy and noise reduction.
For instance, DNS query traffic is not collected by default.
Similarly, NetBird’s own control traffic (management, keepalives, etc.) is not recorded in flow logs.
The focus is on user-initiated network flows relevant to your access policies.

# Kernel Mode vs Userspace Mode

NetBird leverages WireGuard for its tunneling, and it can operate in two modes on client devices: kernel mode or userspace mode.
In kernel mode, NetBird utilizes the operating system’s WireGuard kernel module (when available) for handling encryption and routing.
This offers very efficient performance with low overhead, as the heavy lifting is done inside the OS kernel.
NetBird is designed to take advantage of kernel-mode WireGuard whenever possible for direct peer-to-peer connections​.
If the kernel module isn’t available or if the platform doesn’t support it (for example, Windows, or certain BSD-based systems),
NetBird falls back to a userspace implementation of WireGuard (running in the NetBird agent process).
Userspace mode may introduce slightly higher CPU usage or latency since packets are handled in the application layer rather than the kernel,
but it ensures compatibility across all environments.

**[CHECK] We need to explain what's the how the flow logs differ in kernel mode vs userspace mode.**

# Flow Log Retention

Network Flow Logs on NetBird clients are not kept indefinitely – they have a retention policy to manage storage use and privacy. By default, flow log data is retained for 1 day on the management.
This means the NetBird cloud will store roughly the last 1 days of flow records;
older records roll off and are deleted automatically.
The 1-day default provides a reasonable window for administrators to review recent network activity and investigate issues or incidents.
It also prevents unlimited growth of log files on the client.

# Scenarios and Use Cases

This section outlines common scenarios in which Network Flow Logs are useful, explaining what administrators can glean in each case.
We’ll also illustrate some scenarios with examples and screenshots of log data where applicable.

## 1. Peer-to-Peer Connections

When two NetBird peers communicate directly, a flow log entry is generated on the peer that initiated the connection.
This covers basic peer-to-peer traffic such as one workstation pinging another, an SSH session from one server to another,
or any application data exchanged between two peers over the NetBird VPN.
The log will show the source peer’s NetBird IP and the destination peer’s NetBird IP, along with the protocol and ports used.

#### 1.1. Example of a flow log entry for a TCP connection between two peers.
In the above example, a peer with IP < a.b.c.d > opened a TCP connection from source port < e > to another peer at IP < f.g.h.i > on destination port < j >.
The screenshot also indicates the volume of data: txBytes and rxBytes (bytes transmitted and received) for that flow.
Initiator peer would log the flow it as an outgoing connection.\
**[CHECK] Add screenshot**

#### 1.2. Example of a flow log entry for an UDP connection between two peers.

#### 1.3. Example of a flow log entry for an ICMP connection between two peers.

## 2. Peer-to-Resource Connections

When a NetBird peer connects to a resource outside the NetBird network (e.g. a private server, a cloud service, or a remote subnet), ...

#### 2.1. Peer-To-Host Connection

#### 2.2. Peer-To-Subnet Connection

#### 2.3. Peer-To-Domain Connection

## 3. Site-to-Site Connections

When two NetBird networks are connected via a site-to-site tunnel, flow logs can help administrators monitor traffic between the two networks.
...

# Enabling and Disabling Flow Logs

# Enabling and Disabling Packet Counting

# Privacy and Security Considerations

# Conclusion



