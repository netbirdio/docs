# Connecting to AWS VPC Resources - The Right Way

<img style={{float: 'right', width: 250, margin: '0 0 10px 30px'}} src="/docs-static/img/how-to-guides/aws-vpc/aws-logo.png" alt="aws logo" />

**[TODO: Description]** Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas dolor enim, semper at hendrerit ac, convallis non magna. Curabitur at quam orci. Aenean convallis vehicula justo, et convallis turpis aliquam quis. Ut porta nec orci vel convallis. In id maximus turpis. Mauris non tincidunt sapien, sit amet blandit erat. Duis tempor dolor ut porta imperdiet. Fusce molestie porttitor augue, eu congue neque dignissim vel. Sed vitae elit nulla. Etiam facilisis a turpis vitae varius. Maecenas iaculis consequat mauris, id ultricies felis ornare sed. Nam nec mattis ligula, tempus maximus justo. Etiam malesuada malesuada malesuada erat ac tristique sollicitudin. Curabitur porta at nunc nec ornare. Curabitur porta at nunc nec ornare. Curabitur porta at nunc nec ornare.

**In this example, we will connect to AWS resources in a private AWS Cloud with NetBird Networks using High-Availability **

This allows you to:

* Connect to EC2 running on private subnets without the need to open firewall rules or configure bastion servers.
* Use other AWS resources where installation of NetBird agent is not desired or not possible: managed databases, Lambda functions, etc.
* Make your AWS resource able to access other services connected to your NetBird network and running anywhere else.
<Note>
    Before getting started with this, be aware that usage of AWS resources may incur charges from AWS
</Note>

## Video Guide
For details on connecting AWS resources to your NetBird network, watch this video guide on YouTube:
**[TODO: Record a video for this guide]**
<iframe width="560" height="315" src="https://www.youtube.com/embed/JRCZy4rLi-c?start=34" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Prerequisites
In this guide we assume that user has some experience with AWS and its features aren't explained in details.
### Requirements
* A NetBird account with a Setup Key.
* Another NetBird client in your network to validate the connection (possibly your laptop or a machine you are running this example on).
* An [AWS account](https://aws.amazon.com/free/).

### Exisitng AWS VPC
In this guide, we won't cover creation of an AWC Virtual Private Network
<p>
    <a href="/docs-static/img/how-to-guides/aws-vpc/vpc-diagram.png">
        <img src="/docs-static/img/how-to-guides/aws-vpc/vpc-diagram.png" alt="aws vpc diagram" max-width="800" />
    </a>
</p>

### Security Group

The default pre-created security group allows all outbound traffic, but no incoming traffic - the VPC resources are allowed to communicate with each over within the VPC, but we won't be able to access them from the outside.

<p>
    <a href="/docs-static/img/how-to-guides/aws-vpc/vpc-sec-group.png">
        <img src="/docs-static/img/how-to-guides/aws-vpc/vpc-sec-group.png" alt="aws vpc diagram" max-width="800"/>
    </a>
</p>

## Guide

### Create a Security Group

To make our Routing Peer available to other NetBird clients directly without using of a Relay, we have to create a Security Group...


### Create an EC2 Launch Template

* Navigate to AWS EC2 service and 

### Create an EC2 Target Group
...

### Create an EC2 Load Balancer
...

### Create a NetBird Network
...

### Add a Routing Peer Group
...

## Validation

To be sure that everything works, we need to test access to AWS resources.

### Create 

... temporary ec2 instance ...

### Add a Resource

... screenshots ...

## Tear Down

To avoid possible costs, remove created resources:

* NetBird Router Instances Auto-Scaling Group
* Load Balancer
* the VPC and related resources like Security Groups if they were created