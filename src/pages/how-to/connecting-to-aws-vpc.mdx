# Connecting to AWS VPC Resources

<img style={{float: 'right', width: 250, margin: '0 0 10px 30px'}} src="/docs-static/img/how-to-guides/aws-vpc/aws-logo.png" alt="aws logo" />

**[TODO: Description]** Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas dolor enim, semper at hendrerit ac, convallis non magna. Curabitur at quam orci. Aenean convallis vehicula justo, et convallis turpis aliquam quis. Ut porta nec orci vel convallis. In id maximus turpis. Mauris non tincidunt sapien, sit amet blandit erat. Duis tempor dolor ut porta imperdiet. Fusce molestie porttitor augue, eu congue neque dignissim vel. Sed vitae elit nulla. Etiam facilisis a turpis vitae varius. Maecenas iaculis consequat mauris, id ultricies felis ornare sed. Nam nec mattis ligula, tempus maximus justo. Etiam malesuada malesuada malesuada erat ac tristique sollicitudin. Curabitur porta at nunc nec ornare. Curabitur porta at nunc nec ornare. Curabitur porta at nunc nec ornare.

**In this example, we will connect to AWS resources in a private VPC with NetBird Networks**

This allows you to:

* Connect to EC2 running on private subnets
* Use other AWS resources where installation of NetBird agent is not desired or not possible: managed databases, Lambda functions, etc.
* Make your AWS resource able to access other services connected to your NetBird network and running anywhere else.
<Note>
    Before getting started with this, be aware that usage of AWS resources may incur charges from AWS
</Note>

## Video Guide
For details on connecting AWS resources to your NetBird network, watch this video guide on YouTube:
**[TODO: Record a video for this guide]**
<iframe width="560" height="315" src="https://www.youtube.com/embed/JRCZy4rLi-c?start=34" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Prerequisites
In this guide we assume that user has some experience with AWS and its features aren't explained in details.
### Requirements
* A NetBird account with a Setup Key.
* Another NetBird client in your network to validate the connection (possibly your laptop or a machine you are running this example on).
* An [AWS account](https://aws.amazon.com/free/).

### AWS VPC
In this guide, we use an AWC Virtual Private Cloud network, it's possible to use an existing one or create a new. We use a VPC with two private and two public networks placed in two different Availability Zones.
<p>
    <a href="/docs-static/img/how-to-guides/aws-vpc/vpc-diagram.png">
        <img src="/docs-static/img/how-to-guides/aws-vpc/vpc-diagram.png" alt="aws vpc diagram" max-width="800" />
    </a>
</p>

### Security Group

The default pre-created security group allows all outbound traffic, but no incoming traffic - the VPC resources are allowed to communicate with each over within the VPC, but we won't be able to access them from the outside.

<p>
    <a href="/docs-static/img/how-to-guides/aws-vpc/vpc-sec-group.png">
        <img src="/docs-static/img/how-to-guides/aws-vpc/vpc-sec-group.png" alt="aws vpc diagram" max-width="800"/>
    </a>
</p>

## Guide

...

### Create an EC2 instance

* Navigate to AWS EC2 service and create an EC2 instance using Amazon Linux 2 AMI and t.2 micro free-tier compatible ...


### Install NetBird agent

Login to https://app.netbird.io and [add your machine as a peer](https://app.netbird.io/add-peer), once you are done with the steps described there, copy your [Setup key](https://app.netbird.io/setup-keys).

...
install linux agent 
...

### Create a NetBird Network

... create network ... screenshot ... link to documentation

### Add a Routing Peer

<Note>
    For the purposes of High Availability of your resources, we recommend using `Routing Peer Group` as described in [the extended guide](/how-to/connecting-to-aws-vpc-ha). For the clarity of this guide, we proceed with a single `Routing Peer`.
</Note>

...screenshots...

## Validation

To be sure that everything works, we need to test access to AWS resources.

### Create 

... temporary ec2 instance ...

<note>Public IP or Elastic IP</note>

### Add a Resource

... screenshots ...

## Tear Down

To avoid possible costs, remove created resources:

* NetBird Router EC2 Instance
* The EC2 Instance from validation step
* the VPC if it was created